<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ title if title else "Smart Restaurant" }}</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='dist/style.css') }}">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>

<body class="bg-white">
    <!-- Navbar -->
    <nav class="flex justify-between items-center bg-gray-100 p-4 mb-6">
        <div class="space-x-4">
            <a href="{{ url_for('home') }}" class="text-red-500 font-bold">Home</a>
            <a href="{{ url_for('menu') }}" class="text-red-500 font-bold">Menu</a>
            <a href="{{ url_for('contact') }}" class="text-red-500 font-bold">Contact</a>
        </div>

        <div class="relative">
            <a href="{{ url_for('cart') }}" class="text-red-500 font-bold flex items-center">
                ðŸ›’ Cart
                <span id="cart-count" class="ml-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">
                    {% if session.cart %}{{ session.cart|length }}{% else %}0{% endif %}
                </span>
            </a>
        </div>
    </nav>

    <!-- Flash/Notification -->
    <div id="flash-message" class="hidden fixed top-5 right-5 bg-green-500 text-white px-4 py-2 rounded-lg shadow z-50"></div>

    <!-- Page content -->
    <main class="p-6">
        {% block content %}{% endblock %}
    </main>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Global Scripts -->
    <script>
        function showMessage(message) {
            const flash = document.getElementById("flash-message");
            flash.textContent = message;
            flash.classList.remove("hidden");
            setTimeout(() => {
                flash.classList.add("hidden");
            }, 2000);
        }

        async function addToCart(itemId) {
            const response = await fetch(`/add-to-cart/${itemId}`, { method: "POST" });
            const data = await response.json();
            if (data.success) {
                document.getElementById("cart-count").textContent = data.cart_count;
                showMessage(`âœ… ${data.item_name} added to cart!`);
            }
        }
    </script>

    <!-- Page-specific scripts -->
    {% block scripts %}{% endblock %}
</body>
</html>
